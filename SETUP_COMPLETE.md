# ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏

### 1. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π Reality
- –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á: `UTJOOyjxZ/QM35IdmIWAwLF676ObaHITUvIUUKA7TQE=`
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á: `ME+tyfHhUD6tQoPT11MBy0leLM0Wu4IVg5MU7giVoW4=`
- –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤: `/root/config/reality_keys.txt`

### 2. ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –§–∞–π–ª `.env` —Å–æ–∑–¥–∞–Ω —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- API Secret Key —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω
- –í—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

### 3. ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- SQLite –±–∞–∑–∞ —Å–æ–∑–¥–∞–Ω–∞: `/root/database/veil_xray.db`
- –¢–∞–±–ª–∏—Ü—ã `keys` –∏ `traffic_stats` –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã
- –†–∞–∑–º–µ—Ä: 36KB

### 4. ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ: `/root/venv/`
- Production –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- Development –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã (–≤–∫–ª—é—á–∞—è pytest)

### 5. ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Xray
- –ì–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `/root/xray/config.json`
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á Reality –¥–æ–±–∞–≤–ª–µ–Ω
- API –≤–∫–ª—é—á–µ–Ω –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 6. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ
- –í—Å–µ endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã:
  - ‚úì –°–æ–∑–¥–∞–Ω–∏–µ –∫–ª—é—á–∞
  - ‚úì –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–∞
  - ‚úì –ì–µ–Ω–µ—Ä–∞—Ü–∏—è VLESS —Å—Å—ã–ª–∫–∏
  - ‚úì –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ç—Ä–∞—Ñ–∏–∫–∞
  - ‚úì –°–ø–∏—Å–æ–∫ –∫–ª—é—á–µ–π
  - ‚úì –£–¥–∞–ª–µ–Ω–∏–µ –∫–ª—é—á–∞
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è UUID –∏ Short ID —Ä–∞–±–æ—Ç–∞–µ—Ç
- –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ VLESS —Å—Å—ã–ª–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
/root/
‚îú‚îÄ‚îÄ api/                    # API —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ config/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ reality_keys.txt   # –ö–ª—é—á–∏ Reality
‚îú‚îÄ‚îÄ database/              # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ veil_xray.db      # SQLite –±–∞–∑–∞
‚îú‚îÄ‚îÄ xray/                  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Xray
‚îÇ   ‚îî‚îÄ‚îÄ config.json       # –ì–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å –∫–ª—é—á–æ–º
‚îú‚îÄ‚îÄ scripts/               # –°–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ tests/                 # –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ venv/                  # –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ .env                   # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ QUICKSTART.md          # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îî‚îÄ‚îÄ SETUP_COMPLETE.md      # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üöÄ –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Xray

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Xray:

```bash
sudo cp /root/xray/config.json /usr/local/etc/xray/config.json
sudo systemctl restart xray
sudo systemctl status xray
```

### –®–∞–≥ 2: –ó–∞–ø—É—Å—Ç–∏—Ç—å API —Å–µ—Ä–≤–µ—Ä

**–í–∞—Ä–∏–∞–Ω—Ç A: –í—Ä—É—á–Ω—É—é**
```bash
cd /root
source venv/bin/activate
python3 -m uvicorn api.main:app --host 0.0.0.0 --port 8000
```

**–í–∞—Ä–∏–∞–Ω—Ç B: Systemd (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)**
```bash
sudo cp /root/scripts/veil-xray-api.service /etc/systemd/system/
sudo systemctl daemon-reload
sudo systemctl start veil-xray-api
sudo systemctl enable veil-xray-api
sudo systemctl status veil-xray-api
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ API
curl http://localhost:8000/

# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ: http://localhost:8000/docs
```

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á Reality —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `/root/config/reality_keys.txt`
- API Secret Key –≤ `.env` - –∏–∑–º–µ–Ω–∏—Ç–µ –¥–ª—è production
- –§–∞–π–ª—ã `.env` –∏ `config/reality_keys.txt` –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ Git
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ firewall –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞

## üìä API Endpoints

–í—Å–µ endpoints —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Bearer —Ç–æ–∫–µ–Ω:

- `POST /api/keys` - –°–æ–∑–¥–∞—Ç—å –∫–ª—é—á
- `GET /api/keys` - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–ª—é—á–µ–π
- `GET /api/keys/{key_id}` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–ª—é—á–µ
- `DELETE /api/keys/{key_id}` - –£–¥–∞–ª–∏—Ç—å –∫–ª—é—á
- `GET /api/keys/{key_id}/traffic` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞
- `GET /api/keys/{key_id}/link` - VLESS —Å—Å—ã–ª–∫–∞

–¢–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `.env` —Ñ–∞–π–ª–µ: `API_SECRET_KEY`

## ‚úÖ –°—Ç–∞—Ç—É—Å

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–±–æ—Ç–µ:
- ‚úÖ –ö–ª—é—á–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
- ‚úÖ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Xray –≥–æ—Ç–æ–≤–∞
- ‚úÖ API —Å–µ—Ä–≤–µ—Ä –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω
- ‚úÖ –í—Å–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!**

